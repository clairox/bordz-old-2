'use client'
import useProduct from '@/hooks/useProduct'
import ProductDetails from '@/components/Product/ProductDetails'
import { Product } from '@/types/store'
import Image from 'next/image'

const Page: React.FunctionComponent<{ params: { handle: string } }> = ({ params }) => {
    const { data, error, isPending } = useProduct(params.handle)

    if (error) {
        console.error(error)
        return <></>
    }

    if (isPending) {
        return <div>Loading...</div>
    }

    const product: Product = data

    return (
        <div>
            <div className="grid grid-cols-12 ">
                <div className="col-span-7 flex flex-col gap-[1px] border-r border-black">
                    {product.images.map(image => (
                        <Image
                            src={image.src}
                            alt={image.altText || 'product image'}
                            width={image.width}
                            height={image.height}
                            key={image.src}
                        />
                    ))}
                </div>
                <div className="col-span-5 ">
                    <ProductDetails product={product}>
                        <div className="flex justify-between gap-16 pl-6 pr-4 pb-1 border-b border-black">
                            <div className="flex flex-col gap-3 pb-4">
                                <ProductDetails.Title />
                                <ProductDetails.Price />
                            </div>
                            <ProductDetails.WishlistButton />
                        </div>
                        <div className="flex flex-col gap-6 px-6 py-4">
                            <ProductDetails.Selector />
                            <ProductDetails.CartButton />
                        </div>
                        <div className="px-6">
                            <ProductDetails.Description />
                        </div>
                    </ProductDetails>
                </div>
            </div>
            <div className="w-full h-[2000px] bg-green-100"></div>
        </div>
    )
}

export default Page
